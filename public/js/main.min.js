$(window).on("load",(function(){$("#pre-loader").fadeOut(50,()=>{$("#pre-loader").remove(),$("body")[0].style.overflow="visible"})}));const categoryId=document.querySelector("[data-category-id]")?document.querySelector("[data-category-id]").getAttribute("data-category-id"):null,questionDataContainer=document.querySelectorAll("div[data-question-id]");let Question=function(id="",type="",answers={}){this.id=id,this.type=type,this.answers=answers};const questionIdList=[];try{$("#previousAttemptModal").modal("show"),$(".modal-backdrop").css("opacity","1"),document.getElementById("startFromStart").addEventListener("click",e=>{store.get(categoryId).forEach(e=>{store.remove(e),console.log(store.get(e))}),store.remove(categoryId),$('input[type="radio"]').prop("checked",!1),createQuestionListStorage()})}catch(error){}function createQuestionListStorage(){questionDataContainer.forEach(element=>{const questionId=element.getAttribute("data-question-id"),questionType=element.getAttribute("data-question-type");let question=store.get(questionId);if(question){if(!$.isEmptyObject(question.answers)){let questionDSC=document.querySelector('div[data-question-id="'+questionId+'"]');$.each(question.answers,(key,value)=>{let answerData=questionDSC.querySelectorAll("input[name="+key+"]");"1"===value?answerData[0].checked=!0:answerData[1].checked=!0})}}else(question=new Question).id=questionId,question.type=questionType,question.state=!0,store.set(question.id,question),questionIdList.push(questionId),store.set(categoryId,questionIdList);element.addEventListener("click",e=>{"radio"===e.target.getAttribute("type")&&e.target.checked&&(question.answers[e.target.getAttribute("name")]=e.target.value,store.set(question.id,question),$("[name="+e.target.getAttribute("name")+"]").prop("disabled",!0))})})}createQuestionListStorage();const questionList=[],examForm=document.forms["exam-form"];function showResult(data){$(".main-wrapper").empty(),data.feedback||data.error?$(`<div class="">\n                <div class="alert alert-danger">\n                    <p class="lead">${data.feedback?data.feedback:data.error}</p>\n                </div>\n            </div>`).appendTo(".main-wrapper"):data.resultDataArray&&($(`<div class="row">\n                <div class="col-2"></div>\n                <div class="col-8" id="content-Wrapper">\n                    <div class="mt-2 alert alert-${data.totalScoreParentage>70?"success":"danger"}">\n                        <h4 class="alert-heading">${data.totalScoreParentage>70?"Well done!":"Try Hard!"}</h4>\n                            <p> \n                                Your Total mark of this Exam is <span class="badge badge-dark">${data.totalScore[0]}</span> out of ${data.totalScore[1]}\n                            </p>\n                            <hr>\n                            <p class="mb-0">\n                                Your mark in percentage is <span class="badge badge-dark">${data.totalScoreParentage}%</span>\n                            </p>\n                        </ul>\n                    </div>\n                </div>\n                <div class="col-2"></div>\n            </div>`).appendTo(".main-wrapper"),data.resultDataArray.forEach((e,i)=>{"matrix"===e.type?($(`<div class="mb-2">\n                    <ul class="list-group" id="list-group-${i}">\n                        <li class="list-group-item active text-center">\n                            Answer and Explanation For Question no. <span class="badge badge-light">${i+1}</span>. <p>Ques: ${e.text}</p> Mark Obtained: <span class="badge ${Number(e.score)>.5?"badge-success":"badge-danger"}">${e.score}</span>\n                        </li>\n                    </ul>\n                    </div>`).appendTo("#content-Wrapper"),e.answers.forEach((element,index)=>{$(`<li class="list-group-item ${element[0]?"list-group-item-success ":"list-group-item-danger"} py-1">\n                            <p class="my-0">\n                                Your Answer For Stem ${index+1} <p>${e.stems[index]}</p> is ${element[0]?"Right":"Wrong"}. Right Answer is  <span class="badge badge-success">${"1"===element[1]?"True":"False"}</span>\n                            </p>\n                            <p class="my-0">\n                                Explanation: ${e.feedbacks[index].length>0?e.feedbacks[index]:"No explanation"}\n                            </p> \n                        </li>`).appendTo("#list-group-"+i)}),e.generalFeedbacks.length>0&&$(`<li class="list-group-item">\n                            <p>Overall Explanation: ${e.generalFeedbacks} </p>\n                        </li>`).appendTo("#list-group-"+i)):"sba"===e.type&&($(`<div class="mb-2">\n                    <ul class="list-group" id="list-group-${i}">\n                        <li class="list-group-item active text-center">\n                            Answer and Explanation For Question no. <span class="badge badge-light">${i+1}</span>. Mark Obtained: <span class="badge ${Number(e.score)>.5?"badge-success":"badge-danger"}">${e.score}</span>\n                        </li>\n                    </ul>\n                    </div>`).appendTo("#content-Wrapper"),$(`<li class="list-group-item ${e.answers[0]?"list-group-item-success ":"list-group-item-danger"} py-1">\n                        <p class="my-0">\n                            Your Answer For this question is ${e.answers[0]?"Right":"Wrong"}. Right Answer is:   <span class="badge badge-success">${e.answers[1]}</span>\n                        </p>\n                    </li>`).appendTo("#list-group-"+i),e.feedbacks.length>0&&e.feedbacks.forEach((element,index)=>{$(`<li class="list-group-item list-group-item-info py-1">\n                                <p class="my-0">\n                                    Explanation: ${element.length>0?element:"No explanation"}\n                                </p> \n                            </li>`).appendTo("#list-group-"+i)}),e.generalFeedbacks.length>0&&$(`<li class="list-group-item">\n                            <p>Overall Explanation: ${e.generalFeedbacks} </p>\n                        </li>`).appendTo("#list-group-"+i))}))}examForm&&examForm.addEventListener("submit",e=>{e.preventDefault(),$("#onSubmitModal").modal("show"),$(".modal-backdrop").css("opacity",".5")}),$("#submitAnswer").click(e=>{const csrf=document.querySelector('[name="_csrf"]').value;$("#onSubmitModal").modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove(),$(".main-wrapper").empty(),$('<div class="d-flex justify-content-center align-items-center center-wrapper">\n            <div class="spinner-border text-primary" role="status">\n                <span class="sr-only">Loading...</span>\n            </div>\n    </div>').appendTo(".main-wrapper");const categoryId=document.querySelector("[data-category-id]").getAttribute("data-category-id"),isDemo=document.querySelector("[data-category-demo]").getAttribute("data-category-demo"),questionIdList=store.get(categoryId);store.each((key,value)=>{value.state&&questionIdList.includes(value.id)&&questionList.push(value)}),axios({method:"post",url:"false"===isDemo?"/exam/?questionCategory="+categoryId:"/exam/demo",data:Qs.stringify({questionList:questionList}),headers:{"content-type":"application/x-www-form-urlencoded","x-csrf-token":csrf}}).then(({data:data})=>{console.log(data),showResult(data)}).catch(err=>{console.log(err)}),store.clearAll()}),document.querySelector(".slick-question")&&$(".slick-question").slick({dots:!0,customPaging:function(slider,i){var thumb=$(slider.$slides[i]).data();return'<a class="badge badge-info text-white">'+(i+1)+"</a>"}}),$("#resetBtn").click(e=>{$("#passReset").submit()}),$(document).ready((function(){$('[data-toggle="popover"]').popover({placement:"top",html:!0,title:'Share on Socials <a href="#" class="close" data-dismiss="alert">&times;</a>',content:'<div class="media"><a href="#" class="pull-left"><div class="media-body"><h4 class="media-heading">Please, share us</h4><div id="share-wrapper"><div id="share"></div></div></div></div>'}),$(document).on("click",".popover .close",(function(){$(this).parents(".popover").popover("hide")}))})),$('[data-toggle="popover"]').on("inserted.bs.popover",(function(){$("#share").jsSocials({showLabel:!1,showCount:!1,shares:["email","twitter","facebook","googleplus","linkedin"]})})),window.cookieconsent.initialise({palette:{popup:{background:"#000"},button:{background:"#f1d600"}},theme:"edgeless"}),$((function(){$('[data-toggle="tooltip"]').tooltip()})),$(".custom-file-input").on("change",(function(){let fileName=$(this).val().split("\\").pop(),label=$(this).siblings(".custom-file-label");void 0===label.data("default-title")&&label.data("default-title",label.html()),""===fileName?label.removeClass("selected").html(label.data("default-title")):label.addClass("selected").html(fileName)}));